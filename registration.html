<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Registration - Houston Clinical Trials</title>
  <style>
    body {
  font-family: Arial, sans-serif;
  margin: 2rem;
  background-color: #f3f1eb;
  color: #393939;
}
h1 {
  margin-bottom: 1rem;
}
.form-group {
  margin-bottom: 1rem;
}
.form-group label {
  display: block;
  font-weight: 600;
  margin-bottom: 0.25rem;
}
.form-group input,
.form-group select,
.form-group textarea {
  width: 100%;
  max-width: 400px;
  padding: 0.5rem;
  margin-bottom: 0.5rem;
  border: 1px solid #ccc;
  border-radius: 0.25rem;
}
.form-inline {
  display: flex;
  gap: 1rem;
}
.form-inline input {
  width: auto;
}
.button {
  display: inline-block;
  padding: 0.75rem 1.25rem;
  background-color: #2596be;
  color: #fff;
  border-radius: 0.5rem;
  text-decoration: none;
  cursor: pointer;
}
.button:hover {
  background-color: #305474;
}
#thankYouMessage {
  margin-top: 1rem;
  font-weight: 600;
  color: #2596be;
}
@media screen and (min-width: 960px) {
  .registration__container {
    max-width: 800px;
    margin: 0 auto;
  }
  #registrationForm {
    display: grid;
    grid-template-columns: 1fr 1fr;
    column-gap: 2rem;
  }
  .form-group {
    margin-bottom: 1.5rem;
  }
  button.button {
    grid-column: 1 / 3;
    justify-self: center;
  }
  #submitBtn {
    text-align: center;
    width: 120px;
    font-size: 25px;
    height: 30px;
  }
  textarea {
  resize: none;
  }
}


  </style>
</head>
<body>

  <!-- Back to Home Button -->
  <a href="index.html" class="button" style="margin-bottom: 1rem;">Back to Home</a>

  <h1>Registration</h1>
  <p>
    To learn more about our studies and see if you qualify, please provide the following information. Your details will be kept secure and used only to contact you regarding potential participation and study-related updates.
  </p>

  <section class="registration section bd-container" id="registration">
    <!-- The registration form -->
    <form id="registrationForm">
      <!-- Example fields -->
      <div class="form-group">
        <label>Are you currently enrolled in a clinical trial? *</label>
        <div class="form-inline">
          <label><input type="radio" name="currentlyEnrolled" value="Yes" required> Yes</label>
          <label><input type="radio" name="currentlyEnrolled" value="No"> No</label>
        </div>
      </div>

      <div class="form-group">
        <label>Have you ever participated in a clinical trial? *</label>
        <div class="form-inline">
          <label><input type="radio" name="everParticipated" value="Yes" required> Yes</label>
          <label><input type="radio" name="everParticipated" value="No"> No</label>
        </div>
      </div>

      <div class="form-group">
        <label>Full Name *</label>
        <div class="form-inline">
          <input type="text" id="firstName" name="firstName" placeholder="First Name" required>
          <input type="text" id="lastName" name="lastName" placeholder="Last Name" required>
        </div>
      </div>

      <div class="form-group">
        <label for="emailAddress">Email Address *</label>
        <input type="email" id="emailAddress" name="emailAddress" required>
      </div>

      <div class="form-group">
        <label for="phone">Phone Number *</label>
        <input type="tel" id="phone" name="phone" pattern="\d{3}-\d{3}-\d{4}" required>
      </div>

      <div class="form-group">
        <label for="address">Address</label>
        <input type="text" id="address" name="address">
      </div>

      <div class="form-group form-inline">
        <div>
          <label for="city">City</label>
          <input type="text" id="city" name="city">
        </div>
        <div>
          <label for="state">State</label>
          <select id="state" name="state">
            <option value="">-- Select State --</option>
            <option value="AL">AL</option>
            <option value="AK">AK</option>
            <option value="AZ">AZ</option>
            <option value="AR">AR</option>
            <option value="CA">CA</option>
            <option value="CO">CO</option>
            <option value="CT">CT</option>
            <option value="DE">DE</option>
            <option value="FL">FL</option>
            <option value="GA">GA</option>
            <option value="HI">HI</option>
            <option value="ID">ID</option>
            <option value="IL">IL</option>
            <option value="IN">IN</option>
            <option value="IA">IA</option>
            <option value="KS">KS</option>
            <option value="KY">KY</option>
            <option value="LA">LA</option>
            <option value="ME">ME</option>
            <option value="MD">MD</option>
            <option value="MA">MA</option>
            <option value="MI">MI</option>
            <option value="MN">MN</option>
            <option value="MS">MS</option>
            <option value="MO">MO</option>
            <option value="MT">MT</option>
            <option value="NE">NE</option>
            <option value="NV">NV</option>
            <option value="NH">NH</option>
            <option value="NJ">NJ</option>
            <option value="NM">NM</option>
            <option value="NY">NY</option>
            <option value="NC">NC</option>
            <option value="ND">ND</option>
            <option value="OH">OH</option>
            <option value="OK">OK</option>
            <option value="OR">OR</option>
            <option value="PA">PA</option>
            <option value="RI">RI</option>
            <option value="SC">SC</option>
            <option value="SD">SD</option>
            <option value="TN">TN</option>
            <option value="TX">TX</option>
            <option value="UT">UT</option>
            <option value="VT">VT</option>
            <option value="VA">VA</option>
            <option value="WA">WA</option>
            <option value="WV">WV</option>
            <option value="WI">WI</option>
            <option value="WY">WY</option>
            <option value="DC">DC</option>
          </select>
        </div>
      </div>

      <div class="form-group">
        <label for="zipCode">Zip Code</label>
        <input type="text" id="zipCode" name="zipCode">
      </div>

      <div class="form-group">
        <label for="sex">Sex *</label>
        <select id="sex" name="sex" required>
          <option value="">-- Please Select --</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
          <option value="Other">Other / Prefer not to say</option>
        </select>
      </div>

      <div class="form-group">
        <label for="dob">Date of Birth *</label>
        <input type="date" id="dob" name="dob" required>
      </div>

      <div class="form-group">
        <label for="bestTime">What is the best time of day to call? *</label>
        <select id="bestTime" name="bestTime" required>
          <option value="">-- Select Time of Day --</option>
          <option value="Morning">Morning</option>
          <option value="Afternoon">Afternoon</option>
          <option value="Early Evening">Early Evening</option>
        </select>
      </div>
      

      <div class="form-group">
        <label for="howHear">How did you hear about Houston Clinical Trials?</label>
        <input type="text" id="howHear" name="howHear" placeholder="Online Search, Friend, Social Media, etc.">
      </div>

      <div class="form-group">
        <label for="studies">Which of our studies interest you? *</label>
        <select id="studies" name="studies" required>
          <option value="">-- Select a Study --</option>
          <option value="Major Depression in Adults">Major Depression in Adults</option>
          <option value="Major Depression in Children & Adolescents">Major Depression in Children & Adolescents</option>
          <option value="ADHD">ADHD</option>
          <option value="ADHD in Children & Adolescents">ADHD in Children & Adolescents</option>
          <option value="Bipolar Disorder">Bipolar Disorder</option>
          <option value="Anxiety Disorder">Anxiety Disorder</option>
          <option value="Other">Other</option>
        </select>
      </div>
      <div class="form-group" id="studyOtherGroup">
        <label for="studyOther">If other, please indicate your study/area of interest:</label>
        <input type="text" id="studyOther" name="studyOther" placeholder="Other study/area of interest">
      </div>
      

      <div class="form-group">
        <label for="conditions">Do you have any significant medical conditions? If so, please list your conditions:</label>
        <textarea id="conditions" name="conditions" rows="4"></textarea>
      </div>

      <!-- Submit button as an anchor tag styled like your buttons -->
      <a href="#" class="button" id="submitBtn">Submit</a>
      <p id="thankYouMessage" style="display: none;"></p>
    </form>
  </section>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
  const phoneInput = document.getElementById('phone');
  
  phoneInput.addEventListener('blur', function() {
    // Remove all non-digit characters
    let digits = phoneInput.value.replace(/\D/g, '');
    
    // Only auto-format if we have exactly 10 digits
    if(digits.length === 10) {
      const formattedNumber = digits.substring(0,3) + '-' +
                              digits.substring(3,6) + '-' +
                              digits.substring(6,10);
      phoneInput.value = formattedNumber;
    }
  });
});
  </script>

  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script type="text/javascript">
    // Initialize EmailJS with your user ID
    (function(){
      emailjs.init({
        publicKey: "aaUikvzeH71VgOREm",
      });
   })();

    // Attach a click handler to your submit anchor
    document.getElementById('submitBtn').addEventListener('click', function(e) {
    e.preventDefault(); // Prevent the anchor's default behavior

    const form = document.getElementById('registrationForm');
    
    // Check form validity before sending
    if (!form.checkValidity()) {
      form.reportValidity();
      return;
    }
    
    const formData = new FormData(form);

    // Build template parameters; keys must match your EmailJS template placeholders exactly.
    const templateParams = {
      currentlyEnrolled: formData.get('currentlyEnrolled') || "",
      everParticipated: formData.get('everParticipated') || "",
      fullName: formData.get('firstName') + " " + formData.get('lastName'),
      email: formData.get('emailAddress'),
      phone: formData.get('phone'),
      address: formData.get('address'),
      city: formData.get('city') || "",
      state: formData.get('state') || "",
      zipCode: formData.get('zipCode') || "",
      sex: formData.get('sex'),
      dob: formData.get('dob'),
      bestTime: formData.get('bestTime') || "",
      howHear: formData.get('howHear') || "",
      studies: formData.get('studies') || "",
      studyOther: formData.get('studyOther') || "",
      conditions: formData.get('conditions') || ""
    };

    console.log("Template Params:", templateParams);

    // Send email using EmailJS
    emailjs.send('service_hwh44t5', 'template_wp4wlr6', templateParams)
      .then(function(response) {
        const thankYouEl = document.getElementById('thankYouMessage');
        thankYouEl.innerHTML = "Thanks, we will get back to you soon. Navigating back to the Home page.";
        thankYouEl.style.display = "block";
        form.reset(); // Optionally clear the form
        // After 5 seconds, navigate back to the homepage
        setTimeout(function() {
          window.location.href = "index.html";
        }, 5000);
      }, function(error) {
        const thankYouEl = document.getElementById('thankYouMessage');
        thankYouEl.innerHTML = "Sorry, something went wrong. Please try again later.";
        thankYouEl.style.display = "block";
        console.error('FAILED...', error);
      });
  });

  </script>

</body>
</html>
